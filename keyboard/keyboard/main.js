(()=>{"use strict";function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=e((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];o(this,t);var u=document.createElement(n);u.className=r,u.innerHTML=i,this.node=u,s?e.append(u):e.prepend(u)}));const r=JSON.parse('[[{"code":"Backquote","type":"Symbol","shift":{"en":"~"},"default":{"en":"`","ru":"ё"}},{"code":"Digit1","type":"Symbol","shift":{"en":"!"},"default":{"en":"1"}},{"code":"Digit2","type":"Symbol","shift":{"en":"@","ru":"\\""},"default":{"en":"2"}},{"code":"Digit3","type":"Symbol","shift":{"en":"#","ru":"№"},"default":{"en":"3"}},{"code":"Digit4","type":"Symbol","shift":{"en":"$","ru":";"},"default":{"en":"4"}},{"code":"Digit5","type":"Symbol","shift":{"en":"%"},"default":{"en":"5"}},{"code":"Digit6","type":"Symbol","shift":{"en":"^","ru":":"},"default":{"en":"6"}},{"code":"Digit7","type":"Symbol","shift":{"en":"&","ru":"?"},"default":{"en":"7"}},{"code":"Digit8","type":"Symbol","shift":{"en":"*"},"default":{"en":"8"}},{"code":"Digit9","type":"Symbol","shift":{"en":"("},"default":{"en":"9"}},{"code":"Digit0","type":"Symbol","shift":{"en":")"},"default":{"en":"0"}},{"code":"Minus","type":"Symbol","shift":{"en":"_"},"default":{"en":"-"}},{"code":"Equal","type":"Symbol","shift":{"en":"+"},"default":{"en":"="}},{"code":"Backspace","type":"Function","default":"Backspace"}],[{"code":"Tab","type":"Function","default":"Tab"},{"code":"KeyQ","type":"Symbol","default":{"en":"q","ru":"й"}},{"code":"KeyW","type":"Symbol","default":{"en":"w","ru":"ц"}},{"code":"KeyE","type":"Symbol","default":{"en":"e","ru":"у"}},{"code":"KeyR","type":"Symbol","default":{"en":"r","ru":"к"}},{"code":"KeyT","type":"Symbol","default":{"en":"t","ru":"е"}},{"code":"KeyY","type":"Symbol","default":{"en":"y","ru":"н"}},{"code":"KeyU","type":"Symbol","default":{"en":"u","ru":"г"}},{"code":"KeyI","type":"Symbol","default":{"en":"i","ru":"ш"}},{"code":"KeyO","type":"Symbol","default":{"en":"o","ru":"щ"}},{"code":"KeyP","type":"Symbol","default":{"en":"p","ru":"з"}},{"code":"BracketLeft","type":"Symbol","shift":{"en":"{"},"default":{"en":"[","ru":"х"}},{"code":"BracketRight","type":"Symbol","shift":{"en":"}"},"default":{"en":"]","ru":"ъ"}},{"code":"Backslash","type":"Symbol","shift":{"en":"|","ru":"/"},"default":{"en":"\\\\","ru":"\\\\"}},{"code":"Delete","type":"Function","default":"Del"}],[{"code":"CapsLock","type":"Function","default":"CapsLock"},{"code":"KeyA","type":"Symbol","default":{"en":"a","ru":"ф"}},{"code":"KeyS","type":"Symbol","default":{"en":"s","ru":"ы"}},{"code":"KeyD","type":"Symbol","default":{"en":"d","ru":"в"}},{"code":"KeyF","type":"Symbol","default":{"en":"f","ru":"а"}},{"code":"KeyG","type":"Symbol","default":{"en":"g","ru":"п"}},{"code":"KeyH","type":"Symbol","default":{"en":"h","ru":"р"}},{"code":"KeyJ","type":"Symbol","default":{"en":"j","ru":"о"}},{"code":"KeyK","type":"Symbol","default":{"en":"k","ru":"л"}},{"code":"KeyL","type":"Symbol","default":{"en":"l","ru":"д"}},{"code":"Semicolon","type":"Symbol","shift":{"en":":"},"default":{"en":";","ru":"ж"}},{"code":"Quote","type":"Symbol","shift":{"en":"\\""},"default":{"en":"\'","ru":"э"}},{"code":"Enter","type":"Function","default":"Enter"}],[{"code":"ShiftLeft","type":"Function","default":"Shift"},{"code":"KeyZ","type":"Symbol","default":{"en":"z","ru":"я"}},{"code":"KeyX","type":"Symbol","default":{"en":"x","ru":"ч"}},{"code":"KeyC","type":"Symbol","default":{"en":"c","ru":"с"}},{"code":"KeyV","type":"Symbol","default":{"en":"v","ru":"м"}},{"code":"KeyB","type":"Symbol","default":{"en":"b","ru":"и"}},{"code":"KeyN","type":"Symbol","default":{"en":"n","ru":"т"}},{"code":"KeyM","type":"Symbol","default":{"en":"m","ru":"ь"}},{"code":"Comma","type":"Symbol","shift":{"en":"<"},"default":{"en":",","ru":"б"}},{"code":"Period","type":"Symbol","shift":{"en":">"},"default":{"en":".","ru":"ю"}},{"code":"Slash","type":"Symbol","shift":{"en":"?","ru":","},"default":{"en":"/","ru":"."}},{"code":"ArrowUp","type":"Function","default":"↑"},{"code":"ShiftRight","type":"Function","default":"Shift"}],[{"code":"ControlLeft","type":"Function","default":"Ctrl"},{"code":"MetaLeft","type":"Function","default":"Win"},{"code":"AltLeft","type":"Function","default":"Alt"},{"code":"Space","type":"Function","default":""},{"code":"AltRight","type":"Function","default":"Alt"},{"code":"ArrowLeft","type":"Function","default":"←"},{"code":"ArrowDown","type":"Function","default":"↓"},{"code":"ArrowRight","type":"Function","default":"→"},{"code":"ControlRight","type":"Function","default":"Ctrl"}]]');function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function u(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(i,t);var e,o,n,r=(o=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(o);if(n){var r=c(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return u(this,t)});function i(t,e,o){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,"div",e)).code=o,n.onKey=function(){},n.node.onmousedown=function(){n.onKey()},n}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(n);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}function y(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(i,t);var e,o,n,r=(o=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(o);if(n){var r=h(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return y(this,t)});function i(t,e,o){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,"key",e)).node.textContent=o,n.node.className="".concat(n.node.className," key_").concat(o.toLowerCase()),n}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(a);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function b(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function v(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(s,t);var e,o,n,r,i=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(n);if(r){var o=S(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return v(this,t)});function s(t,e,o,n,r){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(u=i.call(this,t,"key",e)).defaultValue=o,u.shiftValue=n,u.lang=r,u.defaultValue["".concat(u.lang)]?u.node.textContent=u.defaultValue["".concat(u.lang)]:u.node.textContent=u.defaultValue.en,u}return e=s,(o=[{key:"getSymbol",value:function(){return this.node.textContent}},{key:"caps",value:function(t){this.isCaps=t,this.isCaps||this.isShift?this.node.textContent=this.node.textContent.toUpperCase():this.node.textContent=this.node.textContent.toLowerCase()}},{key:"shift",value:function(t){this.isShift=t,this.isShift?this.shiftValue?this.shiftValue["".concat(this.lang)]?this.node.textContent=this.shiftValue["".concat(this.lang)].toUpperCase():this.defaultValue["".concat(this.lang)]?this.node.textContent=this.defaultValue["".concat(this.lang)].toUpperCase():this.node.textContent=this.shiftValue.en:this.defaultValue["".concat(this.lang)]?this.node.textContent=this.defaultValue["".concat(this.lang)].toUpperCase():this.node.textContent=this.defaultValue.en.toUpperCase():this.isCaps?this.defaultValue["".concat(this.lang)]?this.node.textContent=this.defaultValue["".concat(this.lang)].toUpperCase():this.node.textContent=this.defaultValue.en.toUpperCase():this.defaultValue["".concat(this.lang)]?this.node.textContent=this.defaultValue["".concat(this.lang)]:this.node.textContent=this.defaultValue.en}},{key:"switchLang",value:function(t){this.lang=t,this.node.textContent=this.defaultValue["".concat(t)]||this.defaultValue.en,this.isShift&&this.shift(this.isShift),this.isCaps&&this.caps(this.isCaps)}}])&&b(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),s}(a);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function g(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e){return w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},w(t,e)}function K(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(c,t);var e,o,i,s,u=(i=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(i);if(s){var o=P(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return K(this,t)});function c(t,e,o){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),r=u.call(this,t,"div",e);var i=new n(r.node,"div","keyboard");return r.rows=[new n(i.node,"div","keyboard__row"),new n(i.node,"div","keyboard__row"),new n(i.node,"div","keyboard__row"),new n(i.node,"div","keyboard__row"),new n(i.node,"div","keyboard__row")],r.lang=o,r.renderKeyboard(),r}return e=c,(o=[{key:"renderKeyboard",value:function(){var t=this;this.keyList=[],r.forEach((function(e,o){e.forEach((function(e){"Symbol"===e.type?t.keyList.push(new k(t.rows[o].node,e.code,e.default,e.shift,t.lang)):t.keyList.push(new p(t.rows[o].node,e.code,e.default))}))})),this.onKeys()}},{key:"onKeys",value:function(){var t=this;this.keyList.forEach((function(e){var o=e;o.onKey=function(){t.pressKey=o,t.isPress=!0}}))}},{key:"setPressKey",value:function(t){this.pressKey=this.keyList.find((function(e){return e.code===t.code})),this.isPress=!0}},{key:"getPressKey",value:function(){return this.isPress?this.pressKey:null}},{key:"onCapsLock",value:function(t){this.keyList.forEach((function(e){e.caps&&e.caps(t)}))}},{key:"onShift",value:function(t){this.keyList.forEach((function(e){e.shift&&e.shift(t)}))}},{key:"onMark",value:function(t){t&&(this.markKey=this.keyList.find((function(e){return e.code===t.code}))||null,this.markKey&&this.markKey.node.classList.toggle("mark"))}},{key:"offMark",value:function(t){t&&(this.markKey=this.keyList.find((function(e){return e.code===t.code}))||null,this.markKey&&this.markKey.node.classList.remove("mark"))}},{key:"switchLang",value:function(t){this.keyList.forEach((function(e){e.switchLang&&e.switchLang(t)}))}},{key:"resetKeyboard",value:function(){var t=this;this.keyList.forEach((function(e){e.code.match(/Caps/)||t.offMark(e)}))}}])&&g(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(n);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function j(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}function R(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(s,t);var e,o,n,r,i=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(n);if(r){var o=x(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return R(this,t)});function s(t,e){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(o=i.call(this,t,"textarea",e)).node.value="",o}return e=s,(o=[{key:"getCursorPosition",value:function(){var t=this.node.selectionStart;return{cursorPosition:t,beforeCursor:this.node.value.slice(0,t),afterCursor:this.node.value.slice(t)}}},{key:"printSymbol",value:function(t){var e=this.getCursorPosition(),o=e.beforeCursor,n=e.afterCursor,r=this.getCursorPosition().cursorPosition;this.node.value=o+t+n,r+=1,this.node.setSelectionRange(r,r)}},{key:"backspace",value:function(){var t=this.getCursorPosition(),e=t.beforeCursor,o=t.afterCursor,n=this.getCursorPosition().cursorPosition;n>0&&(this.node.value=e.slice(0,e.length-1)+o,n-=1,this.node.setSelectionRange(n,n))}},{key:"delete",value:function(){var t=this.getCursorPosition(),e=t.cursorPosition,o=t.beforeCursor,n=t.afterCursor;this.node.value=o+n.slice(1),this.node.setSelectionRange(e,e)}},{key:"tab",value:function(){var t=this.getCursorPosition(),e=t.beforeCursor,o=t.afterCursor,n=this.getCursorPosition().cursorPosition;this.node.value="".concat(e,"\t").concat(o),n+=1,this.node.setSelectionRange(n,n)}},{key:"space",value:function(){var t=this.getCursorPosition(),e=t.beforeCursor,o=t.afterCursor,n=this.getCursorPosition().cursorPosition;this.node.value="".concat(e," ").concat(o),n+=1,this.node.setSelectionRange(n,n)}},{key:"enter",value:function(){var t=this.getCursorPosition(),e=t.beforeCursor,o=t.afterCursor,n=this.getCursorPosition().cursorPosition;this.node.value="".concat(e,"\n").concat(o),n+=1,this.node.setSelectionRange(n,n)}},{key:"arrowRight",value:function(){var t=this.getCursorPosition().cursorPosition;t+=1,this.node.setSelectionRange(t,t)}},{key:"arrowLeft",value:function(){var t=this.getCursorPosition().cursorPosition;t-=1,this.node.setSelectionRange(t,t)}},{key:"arrowUp",value:function(){var t=this.getCursorPosition(),e=t.beforeCursor,o=t.afterCursor,n=this.getCursorPosition().cursorPosition;this.node.value="".concat(e,"↑").concat(o),n+=1,this.node.setSelectionRange(n,n)}},{key:"arrowDown",value:function(){var t=this.getCursorPosition(),e=t.beforeCursor,o=t.afterCursor,n=this.getCursorPosition().cursorPosition;this.node.value="".concat(e,"↓").concat(o),n+=1,this.node.setSelectionRange(n,n)}}])&&j(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),s}(n);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function M(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function T(t,e){return T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},T(t,e)}function D(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,o,r,i,s=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=V(r);if(i){var o=V(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return D(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this,t,"div","app")).isCaps=!1,e.isShift=!1,e.isCtrl=!1,e.isAlt=!1,e.node.setAttribute("tabindex","1"),e.node.focus(),e.node.onkeydown=function(t){if(e.keyboard.setPressKey(t),e.pressKey=e.keyboard.getPressKey(),e.keyboard.isPress=!1,e.pressKey){if(e.pressKey.code.match(/Caps/))return void e.caps();if(t.code.match(/Shift/))return e.isShift=!1,e.resetKeys({isAlt:e.isAlt,isShift:!0,isCtrl:e.isCtrl}),void e.keyboard.onMark(t);if(t.code.match(/Control/))return e.isCtrl=!0,e.isAlt&&(e.switchLang(),e.rename()),e.resetKeys({isAlt:e.isAlt,isShift:e.isShift,isCtrl:!1}),void e.keyboard.onMark(t);if(t.code.match(/Alt/))return e.isAlt=!0,e.isCtrl&&(e.switchLang(),e.rename()),e.resetKeys({isAlt:!1,isShift:e.isShift,isCtrl:e.isCtrl}),void e.keyboard.onMark(t);if(e.pressKey.getSymbol)return e.symbol(),void t.preventDefault();e.keyboard.onMark(t),e.textArea.node.focus()}},e.node.onkeyup=function(t){t.code.match(/Caps/)||(t.code.match(/Shift/)&&e.isShift&&(e.isShift=!e.isShift,e.keyboard.onShift(e.isShift)),t.code.match(/Control/)&&(e.isCtrl=!e.isCtrl),t.code.match(/Alt/)&&(e.isAlt=!e.isAlt),e.keyboard.offMark(t))},e.node.onmousedown=function(){if(e.pressKey=e.keyboard.getPressKey(),e.keyboard.isPress=!1,e.pressKey){if(e.pressKey.getSymbol)return void e.symbol();if(e.pressKey.code.match(/Shift/))return void e.shift();if(e.pressKey.code.match(/Control/))return void e.ctrl();if(e.pressKey.code.match(/Alt/))return void e.alt();if(e.pressKey.code.match(/Caps/))return void e.caps();e.pressKey.code.match(/Backspace/)&&e.backspace(),e.pressKey.code.match(/Delete/)&&e.delete(),e.pressKey.code.match(/Tab/)&&e.tab(),e.pressKey.code.match(/Enter/)&&e.enter(),e.pressKey.code.match(/Space/)&&e.space(),e.pressKey.code.match(/Arrow/)&&e.arrow(),e.keyboard.onMark(e.pressKey),e.resetKeys({isAlt:e.isAlt,isShift:e.isShift,isCtrl:e.isCtrl})}},e.node.onmouseup=function(){if(e.pressKey){if(e.pressKey.code.match(/Shift/))return;if(e.pressKey.code.match(/Caps/))return;if(e.pressKey.code.match(/Control/))return;if(e.pressKey.code.match(/Alt/))return;e.textArea.node.focus(),e.keyboard.offMark(e.pressKey)}},e}return e=u,(o=[{key:"getLang",value:function(){localStorage.getItem("lang")?this.lang=localStorage.getItem("lang"):this.lang="en",this.renderKeyboard()}},{key:"renderKeyboard",value:function(){var t=this,e=new n(this.node,"div","container");this.title=new n(e.node,"h1","title"),"en"===this.lang?this.title.node.textContent="RSS Virtual Keyboard":this.title.node.textContent="RSS Виртуальная клавиатура",this.textArea=new L(e.node,"textarea"),this.keyboard=new O(e.node,"keyboard-wrap",this.lang),new n(e.node,"h4","subtitle").node.textContent="OS Linux, switch lang: ctrl+alt or alt+ctrl",window.onblur=function(){t.resetKeyboard()}}},{key:"resetKeyboard",value:function(){this.resetKeys({isAlt:this.isAlt,isShift:!1,isCtrl:this.isCtrl}),this.keyboard.resetKeyboard()}},{key:"resetKeys",value:function(t){var e=t.isAlt,o=t.isShift,n=t.isCtrl;e&&(this.isAlt=!this.isAlt,this.keyboard.offMark(this.pressAlt)),o&&(this.isShift=!this.isShift,this.keyboard.onShift(this.isShift),this.keyboard.offMark(this.pressShift)),n&&(this.isCtrl=!this.isCtrl,this.keyboard.offMark(this.pressCtrl))}},{key:"shift",value:function(){if(this.isShift){if(this.pressKey===this.pressShift)return void this.resetKeys({isAlt:!1,isShift:this.isShift,isCtrl:!1});this.keyboard.offMark(this.pressShift)}else this.isShift=!this.isShift,this.keyboard.onShift(this.isShift);this.pressShift=this.pressKey,this.keyboard.onMark(this.pressKey),this.resetKeys({isAlt:this.isAlt,isShift:!1,isCtrl:this.isCtrl})}},{key:"ctrl",value:function(){var t=this;if(this.isCtrl){if(this.pressKey===this.pressCtrl)return void this.resetKeys({isAlt:!1,isShift:!1,isCtrl:this.isCtrl});this.keyboard.offMark(this.pressCtrl)}else this.isCtrl=!this.isCtrl;this.pressCtrl=this.pressKey,this.keyboard.onMark(this.pressKey),this.isAlt&&(this.switchLang(),this.rename(),setTimeout((function(){t.resetKeys({isAlt:!1,isShift:!1,isCtrl:t.isCtrl})}),66)),this.resetKeys({isAlt:this.isAlt,isShift:this.isShift,isCtrl:!1})}},{key:"alt",value:function(){var t=this;if(this.isAlt){if(this.pressKey===this.pressAlt)return void this.resetKeys({isAlt:this.isAlt,isShift:!1,isCtrl:!1});this.keyboard.offMark(this.pressAlt)}else this.isAlt=!this.isAlt;this.pressAlt=this.pressKey,this.keyboard.onMark(this.pressKey),this.isCtrl&&(this.switchLang(),this.rename(),setTimeout((function(){t.resetKeys({isAlt:t.isAlt,isShift:!1,isCtrl:!1})}),66)),this.resetKeys({isAlt:!1,isShift:this.isShift,isCtrl:this.isCtrl})}},{key:"caps",value:function(){this.isCaps?this.keyboard.offMark(this.pressKey):this.keyboard.onMark(this.pressKey),this.isCaps=!this.isCaps,this.keyboard.onCapsLock(this.isCaps)}},{key:"symbol",value:function(){var t=this.pressKey.getSymbol();this.textArea.printSymbol(t),this.keyboard.onMark(this.pressKey),this.resetKeys({isAlt:this.isAlt,isShift:!1,isCtrl:this.isCtrl})}},{key:"backspace",value:function(){this.textArea.backspace()}},{key:"delete",value:function(){this.textArea.delete()}},{key:"tab",value:function(){this.textArea.tab()}},{key:"space",value:function(){this.textArea.space()}},{key:"enter",value:function(){this.textArea.enter()}},{key:"arrow",value:function(){this.pressKey.code.match(/Right/)?this.textArea.arrowRight():this.pressKey.code.match(/Left/)?this.textArea.arrowLeft():this.pressKey.code.match(/Up/)?this.textArea.arrowUp():this.pressKey.code.match(/Down/)&&this.textArea.arrowDown()}},{key:"switchLang",value:function(){"en"===this.lang?this.lang="ru":this.lang="en",localStorage.setItem("lang",this.lang),this.keyboard.switchLang(this.lang)}},{key:"rename",value:function(){console.log("aa"),"en"===this.lang?this.title.node.textContent="RSS Virtual Keyboard":this.title.node.textContent="RSS Виртуальная клавиатура"}}])&&M(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),u}(n))(document.body).getLang()})();
//# sourceMappingURL=main.js.map